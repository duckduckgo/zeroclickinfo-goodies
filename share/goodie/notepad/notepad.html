<textarea id="ddgpad" style="width:100%" onkeyup="ddgpad_keydown();"></textarea>
<a id="ddgpad_save" href="#" target="_blank">save to file</a>
<script type="text/javascript">
ddgpad = document.getElementById("ddgpad");
ddgpad_save = document.getElementById("ddgpad_save");
function ddgpad_keydown(){
	ddgpad.setAttribute("rows", ddgpad.value.split("\n").length + 2);
	ddgpad_save.setAttribute("href", "data:text/plain;base64," + encode_base64(ddgpad.value));
}

/* source: http://ecmanaut.blogspot.co.uk/2007/11/javascript-base64-singleton.html */
function encode_base64(data) {
	var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
	var out = "", c1, c2, c3, e1, e2, e3, e4;
	for (var i = 0; i < data.length; ) {
	c1 = data.charCodeAt(i++);
	c2 = data.charCodeAt(i++);
	c3 = data.charCodeAt(i++);
	e1 = c1 >> 2;
	e2 = ((c1 & 3) << 4) + (c2 >> 4);
	e3 = ((c2 & 15) << 2) + (c3 >> 6);
	e4 = c3 & 63;
	if (isNaN(c2))
	 e3 = e4 = 64;
	else if (isNaN(c3))
	 e4 = 64;
	out += tab.charAt(e1) + tab.charAt(e2) + tab.charAt(e3) + tab.charAt(e4);
	}
	return out;
}

</script>
